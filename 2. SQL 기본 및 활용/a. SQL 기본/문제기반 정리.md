## SQL 종류 정리

- DML(Data Manipulation Language) : 데이터 조작 언어
  - SELECT, INSERT, UPDATE, DELETE
- DDL(Data Definition Language) : 데이터 정의 언어
  - CREATE, DROP, ALTER, TRUNCATE
- DCL(Data Control Language) : 데이터 제어 언어
  - GRANT, REVOKE
- TCL(Transaction Control Language) : 트랜잭션 제어 언어

## 절차적 데이터 조작어와 비절차적 데이터 조작어

- 절차적 데이터 조작어(Procedural Data Manipulation Language)
  - SQL
  - 무슨 데이터를 어떻게 조작할지 어떻게 접근할지 명세한다
- 비절차적 데이터 조작어(Non-Procedural Data Manipulation Language)
  - T-SQL
  - 무슨 데이터를 조작할지만 명세한다

## UNIQUE

- UNIQUE키는 NULL 입력이 가능하다. UNIQUE키는 중복된 값을 입력할 수 없다.

## 테이블명

- 테이블 명에는 공백이 들어갈 수 없다.
- A-Z, a-z, 0-9,\_,$,# 만 허용된다
- 테이블 명에는 숫자가 들어갈 수 있지만 숫자로 시작할 수는 없다.
- 다른 테이블과 중복 X
- 단수형
- 예약어 사용불가

## PK 생성

- CREATE TABLE 테이블명 (컬럼명 데이터타입 PRIMARY KEY);
  - 이렇게 한번 생성되면 이후에 ALTER를 통해 PK를 추가할 수 없다.
- ALTER TABLE 테이블명 ADD CONSTRAINT PK\_테이블명 PRIMARY KEY(컬럼명);

## 외래키

- 테이블 생성시 설정할 수 있다
- 외래키 값은 null이 될 수 있다
- 한테이블에 여러값이 들어갈 수 있다
- 참조 무결성 제약을 받을 수 있다

## 참조동작

- DELETE

  - Cascade : 마스터 삭제시 child 삭제된다
  - Set Null : 마스터 삭제시 child null로 변경된다
  - Set Default : 마스터 삭제시 child 기본값으로 변경된다
  - Restrict : child 테이블에 값이 있으면 마스터 삭제 불가
  - No Action : 아무런 액션 X

- INSERT
  - Automatic : 마스터 테이블에 PK가 없는 경우 마스터 pk를 생성 후 child 입력
  - Set Null : 마스터 테이블에 PK가 없는 경우 null
  - Set Default : 마스터 테이블에 PK가 없는 경우 지정된 default 값
  - Dependent: 마스터 테이블에 PK가 존재할 때만 Child 입력 허용

## INSERT

- INSERT INTO 테이블명 VALUES(값1, 값2, 값3, ...);
  - 컬럼명을 지정하지 않으면 모든 값을 입력해야 한다.
- INSERT INTO 테이블명(컬럼명1, 컬럼명2, 컬럼명3, ...) VALUES(값1, 값2, 값3, ...);

## DELETE by 개발 기준

- DELETE FROM 테이블명
  - 로그를 남긴다
- TRUNCATE or DROP TABLE 테이블명
  - 로그를 남기지 않는다
- DELETE \* FROM 테이블명
  - 문법에 맞지 않는다

## isolation

- READ UNCOMMITTED
  - 커밋되지 않은 데이터를 읽을 수 있다
- Dirty Read
  - 다른 트랜잭션에 의해 수정되었음에도 아직 커밋되지 않은 데이터를 읽는 것을 말한다
- Non-Repeatable Read
  - 한 트랜잭션 내에서 같은 쿼리를 두번 수행했는데 그 사이에 다른 트랜잭션이 값을 수정 또는 삭제해서 결과가 다르게 나올 수 있다
- Phantom Read
  - 한 트랜잭션에서 같은 쿼리를 두 번 실행했을 때, 두 번째 쿼리의 결과가 첫 번째 쿼리의 결과와 다를 수 있다

## AUTO COMMIT

- Oracle
  - 오라클에서는 DDL은 자동 커밋이다
- SQL Server
  - SQL Server에서는 DDL은 자동 커밋이 아니다
- 둘다
  - DML은 자동 커밋이 아니다

## NULL의 연산

- NULL과의 연산은 NULL이다

## Oracle에서의 ''입력

- null로 입력된다
- 이를 조회하려면 IS NULL을 사용해야 한다

## SQL Server에서의 ''입력

- ''로 입력된다
- 이를 조회하려면 where column=''을 사용해야 한다

## 단일행 함수와 다중행 함수

- 지피티 민수야 고맙다!!

SQL에서 함수란, 우리가 실행하기 위해 사용할 수 있는 작은 서브루틴입니다. SQL에서 단일 행 함수와 다중 행 함수 두 가지 유형의 함수가 있습니다.

- 1. 단일 행 함수 (Single Row Function)

- 단일 행 함수는 그 결과로 하나의 행을 반환하는 함수입니다. 다음은 일반적으로 사용되는 단일 행 함수의 예시입니다.

- 문자 함수 (LOWER, UPPER, SUBSTR 등)
- 숫자 함수 (ROUND, TRUNC, MOD 등)
- 날짜 함수 (MONTHS_BETWEEN, ADD_MONTHS 등)
- 예를 들어, UPPER 함수는 문자열을 인자로 받아 대문자로 반환합니다. 아래는 간단한 사용 예시입니다.

- `SELECT UPPER('hello, world!') AS result;`
- 위 쿼리는 "HELLO, WORLD!"라는 결과를 반환합니다.

- 2. 다중 행 함수 (Multi Row Function)

- 다중 행 함수는 여러 행으로부터 계산된 값을 반환합니다. 다음은 일반적으로 사용되는 다중 행 함수의 예시입니다.

- GROUP BY 함수 (COUNT, SUM, AVG 등)
- 집계 함수 (MAX, MIN 등)
- 예를 들어, COUNT 함수는 지정된 컬럼(칼럼)의 행 수를 반환합니다. 아래는 간단한 사용 예시입니다.

- `SELECT COUNT(\*) FROM my_table;`

- 위 쿼리는 "my_table" 테이블에 insert 된 전체 record 수를 구해서 column 명이 없는 1개의 row로 출력됩니다.

- 총성능점수(TPS)의 평균(MEAN)을 구하려면, TPS 값들의 합계(SUM)를 TPS 측정횟수(N)로 나눈 값을 구하면 됩니다.

- `SELECT SUM(tps) / COUNT(\*) AS mean_tps FROM my_table;`
- 위 쿼리는 "my_table" 테이블의 모든 tps record의 평균값(mean_tps)을 구해서 1개의 record와 해당하여 출력됩니다.
